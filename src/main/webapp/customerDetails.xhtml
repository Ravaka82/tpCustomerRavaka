<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:p="http://primefaces.org/ui">
    <f:metadata>
        <f:viewParam name="idCustomer" value="#{customerDetailsBean.idCustomer}"
                     required="true"/>
        <f:viewAction action="#{customerDetailsBean.loadCustomer}"/>
    </f:metadata>
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <h:form rendered="#{not empty customerDetailsBean.customer}">
            <p:messages id="messages"/>
            <h1>Create/Edit</h1>
            <h:panelGrid columns="2" cellpadding="4">
                <p:outputLabel value="CustomerId:" for="customerId" />
                <p:inputText id="customerId" value="#{customerDetailsBean.customer.customerId}" required="true" requiredMessage="The CustomerId field is required."/>
                <p:outputLabel value="Name:" for="name" />
                <p:inputText id="name" value="#{customerDetailsBean.customer.name}" />
                <p:outputLabel value="Email:" for="email" />
                <p:inputText id="email" value="#{customerDetailsBean.customer.email}" />
                <p:outputLabel value="PhoneNumber:" for="phoneNumber" />
                <p:inputText id="phoneNumber" value="#{customerDetailsBean.customer.phone}" />
                <p:outputLabel value="Address:" for="address" />
                <p:inputText id="address" value="#{customerDetailsBean.customer.addressline1}" />
                <p:outputLabel value="City:" for="city" />
                <p:inputText id="city" value="#{customerDetailsBean.customer.city}" />
                <p:outputLabel value="State:" for="state" />
                <p:inputText id="state" value="#{customerDetailsBean.customer.state}" />
                <p:outputLabel value="CreditLimit:" for="creditLimit" />
                <p:inputText id="creditLimit" value="#{customerDetailsBean.customer.creditLimit}" />
                <p:outputLabel value="Discount:" for="discount" />
                <p:selectOneMenu id="discount" value="#{customerDetailsBean.customer.discount}" converter="discountConverter">
                    <f:selectItems value="#{customerDetailsBean.discounts}" var="discount" itemLabel="#{discount.code} : #{discount.rate} %" itemValue="#{discount}" />
                </p:selectOneMenu>
                <p:button id="back" value="Revenir Ã  la liste" outcome="CustomerList"/>
                <p:commandButton id="update" value="Enregistrer" action="#{customerDetailsBean.update}" update="messages"/>
            </h:panelGrid>

        </h:form>
        <h:outputText value="Aucun client avec l'id #{customerDetailsBean.idCustomer} !" rendered="#{empty customerDetailsBean.customer}"/>
    </h:body>
</html>
